<!DOCTYPE html>
<html>
<head>
<meta charset='utf-8' />

<?php
    require_once("inc/stdLib.php");
    $menu = $_SESSION['menu'];
    $head = mkHeader();
    echo $menu['stylesheets'];
    //echo $head['FULLCALCSS'];
    //echo $head['BOXCSS'];
    //echo $head['COLORPICKERCSS'];
    echo $head['JQUERY'];   
    echo $head['JQUERYUI'];
    echo $head['THEME'];
    //echo $head['FULLCALJS'];
    //echo $head['JQBOX'];
    //echo $head['COLORPICKERJS'];
    //print_r( $_SESSION );
    /*****************************************************************************************************************************
    Grundsätze: Content wird via Ajax im Json-Format geholt und an die entsprechenden Container verteilt
                Daten werden ohne Reload einfach via Ajax gespeichtert.
                FÃ¼rs Holen und Schreiben von Daten befindet sich unter jqhelp eine gleichnamige Datei mit der Extension ".php"
                Auf das Benutzen der Variable $_SESSION sollte weitestgehend verzichtet werden.  
                Statt JS einzusetzen sollte auf die jQuery-Methoden zurÃ¼ckgegriffen werden.    
                Url-Parameter kÃ¶nnen mit $.urlParam( 'ParameterName' ) gelesen werden.    
    ******************************************************************************************************************************/

?>

<script>

    $(document).ready(function(){
         
        $.ajax({
            url: 'jqhelp/knowledge.php',
            data: { task:  'getCategories'  },
            type: "POST",
            success: function( json ) {
                var obj = JSON.parse( json.trim() );
                console.log( JSON.stringify( obj ) );
                $.each( obj[0].maingroup, function( i, val ){

                    $( "#menu" ).append("<li id='" + val.id + "'>" + val.labeltext + "<ul class='' id='ul" + val.id + "'></ul></li>"  );
     
                });
                $.each( obj[1].undergroup, function( i, val ){
                    //console.log( JSON.stringify( val.maingroup ) );
                    $( "#ul" + val.maingroup  ).append("<li id='" + val.id + "'>" + val.labeltext + "</li>" );
     
                });
                $( "#menu" ).menu();    
                
            },
            error: function () {
                alert('Ajax Error');
            }
        });
           
        


        
        
    });

</script>
<style>

.ui-menu { width: 220px; }
</style>    

</head>
<body>
<?php 
    echo $menu['pre_content'];
    echo $menu['start_content'];
?>


<ul id="menu">


</ul>           




</div>
<?php $menu['end_content']; ?>
</body>
</html>