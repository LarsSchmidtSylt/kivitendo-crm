<!DOCTYPE html>
<html>
<head>
<meta charset='utf-8'/>
<?php
    require_once("../inc/stdLib.php");
    $menu = $_SESSION['menu'];
    $head = mkHeader();
    echo $menu['stylesheets'];
    echo $menu['javascripts'];
    echo $head['JQTABLE'];
    echo $head['THEME'];


?>


<script type="text/javascript">
    $(document).ready(function(){
        $.ajax({
            dataType: "json",
            url: "../jqhelp/getCallList.php?action=complete",
            method: "GET",
            success : function (data){
                drawTable(data);
                $("#DataTable").trigger("update");
                $("#DataTable").trigger("appendCache");
            }
        });
        function drawTable(data) {
            for (var i = 0; i < data.length; i++) {
                drawRow(data[i]);
            }
        }

        function drawRow( rowData ) {
            var row = $("<tr>")
            $("#tbody").append(row);
            row.append($("<td>" + $.trim(rowData.call_date)  + "</td>"));
            row.append($("<td>" + $.trim(rowData.crmti_status) + "</td>"));
            row.append($("<td>" + $.trim(rowData.crmti_src) + "</td>"));
            row.append($("<td>" + $.trim(rowData.crmti_dst) + "</td>"))
            row.append($("<td>" + $.trim(rowData.crmti_caller_id) + "</td>"))
            row.append($("<td>" + $.trim(rowData.crmti_caller_typ) + "</td>"))
            row.append($("<td>" + $.trim(rowData.crmti_direction) + "</td></tr>"))
        }
    });
</script>
<style>
  table.tablesorter { width:auto; cursor:pointer; }
  th.date { width: 100px }
  th.status, th.id{ width: 70px }
  th.source, th.dest { width: 200px; }
  th.typ, th.dir { width: 50px; }
</style>
</head>

<body>
<?php
    echo $menu['pre_content'];
    echo $menu['start_content'];
?>
<div class="ui-widget-content" style="height:600px">
<p class="ui-state-highlight ui-corner-all" style="margin-top: 20px; padding: 0.6em;"><b>Anrufliste</b></p>
  <table id="DataTable" class="tablesorter">
    <thead>
      <tr>
        <th class="date">date</th>
        <th class="status">status</th>
        <th class="source">source</th>
        <th class="dest">destination</th>
        <th class="id">caller_id</th>
        <th class="typ">caller_typ</th>
        <th class="dir"> direction</th>
      </tr>
    </thead>
    <tbody id="tbody">
    </tbody>
  </table>
</div>
<?php echo $menu['end_content']; ?>
</body>
</html>